(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{doNb:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var s=r("sUYu"),n=r("EM62"),i=r("vobO");let u=(()=>{class e extends s.b{constructor(e){super(Object.assign(Object.assign({},s.d),{serverUrl:"http://localhost:3000/v1",sourceUrl:"/sys/tenants"}),e),this.query=new s.e(new s.c({pageSize:5}))}}return e.\u0275fac=function(t){return new(t||e)(n.hc(i.b))},e.\u0275prov=n.Tb({token:e,factory:e.\u0275fac}),e})()},sUYu:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return Q})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return C})),r.d(t,"e",(function(){return k}));var s=r("EM62"),n=r("YtkY"),i=(r("TLy2"),r("J+dc"),r("ZTXN"));r("pBDD"),r("mW0F"),r("cJ9h"),r("BwBJ"),r("Ohay"),r("wqq/");var u=r("4e/d"),c=r("ruxD"),o=r("8j5Y"),a=(r("47ST"),r("ROBh")),h=r("C05f"),l=r("6Oco"),p=r("i9xl"),g=r("P4Xx"),b=r("eY+9"),f=r("FlRo");function d(e){return null!=e&&(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{e.hasOwnProperty(t)&&null!=e[t]&&"object"==typeof e[t]&&!Object.isFrozen(e[t])&&d(e[t])})),e}r("vobO");var y=function(e){return e.default="",e.json=".json",e.html=".html",e.csv=".csv",e}({});const C={storagePrefix:"idg-",maxCacheAge:21e3,retryCount:5,dateFormat:"YYYY-MM-DD",retryDelayMs:1e3,serverUrl:null};function O(e,t){const r=[];for(const s of Object.keys(e))if(null!=e[s]&&""!==e[s]&&"pageIndex"!==s&&"pageSize"!==s&&"useCache"!==s&&"baseUrl"!==s&&"format"!==s&&"orderBy"!==s){if("false"!==e[s].toString().toLowerCase())if(e[s]._isAMomentObject)r.push(s.toLowerCase()+"="+e[s].format(t||"YYYY-MM-DD"));else if(Object(b.a)(e[s])){const t=[];e[s].forEach(e=>{t.push(`${s}[]=${e}`)}),r.push(t.join("&"))}else r.push(s.toLowerCase()+"="+e[s])}else"orderBy"===s?r.push("order_by="+JSON.stringify(e[s])):"pageIndex"===s?r.push("page_index="+e[s]):"pageSize"===s&&r.push("page_size="+e[s]);return`?${r.join("&")}`}function v(e,t,r){let s=`${e.serverUrl}${t.baseUrl?t.baseUrl:e.sourceUrl}${r||""}${t.format}`;if(t)for(const i of Object.keys(t))"orderBy"!==(n=i)&&"format"!==n&&""!==n&&w(t[i])&&(s=s.replace(`:${i}`,t[i]._isAMomentObject?t[i].format(e.dateFormat):t[i]));var n;return s+(t?O(t,e.dateFormat):"")}function w(e){return null!=e}class S{constructor(e){this.useCache=!0,this.format=e.format||y.json,this.pageIndex=e.pageIndex||0,this.pageSize=e.pageSize||10,this.orderBy=e.orderBy||null,this.accumulate=e.accumulate,this.baseUrl=e.baseUrl||"",this.useCache=e.useCache,this.token=e.token||"",this.q=e.q||""}duplicate(e){return new S(Object.assign(Object.assign({},this),e||{}))}toQueryParams(){return O(this)}}let x=(()=>{class e{constructor(e){this.ar=e,this.unsubscribeAll=new i.a}ngOnInit(){}ngOnDestroy(){this.unsubscribeAll.next(),this.unsubscribeAll.complete()}get urlParams(){return this.ar.paramMap.pipe(Object(n.a)(e=>e.params))}}return e.\u0275fac=function(e){s.kc()},e.\u0275dir=s.Sb({type:e}),e})(),m=(()=>{class e extends x{constructor(e,t,r){super(t),this.service=e,this.ar=t,this.router=r}ngOnInit(){super.ngOnInit(),this.setupDataSource()}ngOnDestroy(){super.ngOnDestroy(),this.querySubscription&&this.querySubscription.unsubscribe(),this.dataSubscription&&this.dataSubscription.unsubscribe()}onPage(e){this.service.pageIndexChanged(e.pageIndex)}navigateInto(e,t){return r=this,void 0,n=function*(){yield this.router.navigate(["../",e.id,t],{relativeTo:this.ar,state:{data:{redirectUrl:location.pathname}}})},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{c(n.next(e))}catch(r){t(r)}}function u(e){try{c(n.throw(e))}catch(r){t(r)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(i,u)}c((n=n.apply(r,[])).next())}));var r,s,n}select(e){this.service.setCurrent(e)}setupDataSource(){this.querySubscription=this.service.Query$.subscribe(e=>{this.service.getCount(e).subscribe(()=>{}),this.service.getList(e).subscribe(()=>{})})}}return e.\u0275fac=function(e){s.kc()},e.\u0275dir=s.Sb({type:e,features:[s.Ib]}),e})(),j=(()=>{class e extends m{constructor(e,t,r){super(e,t,r),this.service=e,this.ar=t,this.router=r}ngOnDestroy(){super.ngOnDestroy(),this.dataSubscription&&this.dataSubscription.unsubscribe()}setupDataSource(){super.setupDataSource(),this.dataSubscription=this.service.List$.subscribe(e=>{this.dataSource?this.dataSource.connect().next(e):this.dataSource=new f.k(e)})}}return e.\u0275fac=function(e){s.kc()},e.\u0275dir=s.Sb({type:e,features:[s.Ib]}),e})();class k extends h.a{constructor(e){super(d(e))}next(e){const t=d(e);var r,s;r=t,s=this.getValue(),JSON.stringify(r)===JSON.stringify(s)||super.next(t)}}class Q extends class extends class extends class{constructor(){this.working=new k(!1),this.filter=new k({}),this.count=new k(0),this.list=new k([]),this.current=new k(null)}get Working(){return this.working.getValue()}get Working$(){return this.working.asObservable()}get Filter(){return this.filter.getValue()}get Filter$(){return this.filter.asObservable()}get Count(){return this.count.getValue()}get Count$(){return this.count.asObservable()}get List(){return this.list.getValue()}get List$(){return this.list.asObservable()}get Current(){return this.current.getValue()}get Current$(){return this.current.asObservable()}setWorking(e){this.working.next(e)}setFilter(e){this.filter.next(e)}setCount(e){this.count.next(e)}setList(e){this.list.next(e)}setCurrent(e){this.current.next(e)}}{constructor(e){if(super(),this.config=e,this.cache={},!e.maxCacheAge)throw new Error("IDG: ConnectionCacheService => no cache age present.");if(!e.retryCount&&0!==e.retryCount)throw new Error("IDG: ConnectionCacheService => no retry count present.")}getCache(e){return this.cache[e]}setCache(e,t){return this.cache[e]=t,this.getCache(e)}clear(e,t){if(t)for(const r of Object.keys(this.cache))delete this.cache[r];else delete this.cache[e]}errorHandler(e){return e&&this.clear(e),l.a}finalizeConnection(){return e=>e.pipe(Object(u.a)(()=>this.errorHandler()),Object(c.a)(()=>this.setWorking(!1)))}fetch(e,t,r=!0){let s=this.getCache(e);if(s&&r){const r=Date.now()-this.config.maxCacheAge;if(s.created_at<r)return this.fetch(e,t,!1);console.log(`Returning cached value from: ${e}`)}else s=this.setCache(e,{created_at:Date.now(),request:t.pipe(this.finalizeConnection())});return s.request}}{constructor(e,t){if(super(e),this.config=e,this.httpClient=t,!e.sourceUrl)throw new Error("IDG: FetchConnectionService => no REST source URL present.")}get Query(){return this.query.getValue()}get Query$(){return this.query.asObservable()}setQuery(e){this.query.next(e)}getFilter(e){const t=v(this.config,e||this.Query,"/filters"),r=this.httpClient.get(t);return this.setWorking(!0),this.fetch(t,r,!1).pipe(Object(o.a)(e=>this.setFilter(e)))}queryChanged(e){this.setQuery(e)}pageIndexChanged(e){this.setQuery(this.Query.duplicate({pageIndex:e}))}queryStringChanged(e){this.setQuery(this.Query.duplicate({pageIndex:0,q:e}))}pageSizeChanged(e){this.setQuery(this.Query.duplicate({pageIndex:0,pageSize:e}))}orderByChanged(e){this.setQuery(this.Query.duplicate({pageIndex:0,orderBy:e}))}baseUrlChanged(e){this.setQuery(this.Query.duplicate({pageIndex:0,baseUrl:e}))}subscribeToQuery(e){return e?this.querySubscription||(this.querySubscription=this.Query$.subscribe(()=>{this.getCount().subscribe(),this.getList().subscribe()})):this.querySubscription&&this.querySubscription.unsubscribe(),this.querySubscription}getList(e,t=!0){const r=v(this.config,e||this.Query),s=this.httpClient.get(r);return this.setWorking(!0),this.fetch(r,s,(e||this.Query).useCache).pipe(Object(o.a)(r=>{t&&this.setList((e||this.Query).accumulate?[...this.list.getValue(),...r]:r)}))}getCount(e,t=!0){const r=v(this.config,e||this.Query,"/count"),s=this.httpClient.get(r);return this.setWorking(!0),this.fetch(r,s,(e||this.Query).useCache).pipe(Object(o.a)(e=>{t&&this.setCount(+e)}))}get(e,t={},r,s=!0){const n=v(this.config,r||this.Query,`/${e}`),i=this.httpClient.get(n);return this.setWorking(!0),function(e,t=l.a,r=l.a){return Object(p.a)(()=>e()?t:r)}(()=>"new"===e.toString().toLocaleLowerCase(),Object(a.a)(t),this.fetch(n,i,(r||this.Query).useCache)).pipe(Object(o.a)(e=>{s&&this.setCurrent(e)}))}}{constructor(e,t){super(e,t),this.config=e,this.httpClient=t}post(e,t){const r=v(this.config,t||this.Query);return this.setWorking(!0),this.httpClient.post(r,{d:e}).pipe(this.finalizeConnection())}patch(e,t){const r=v(this.config,t||this.Query,`/${e.id}`);return this.setWorking(!0),this.httpClient.patch(r,{d:e}).pipe(this.finalizeConnection())}delete(e,t){const r=v(this.config,t||this.Query,`/${e}`);return this.setWorking(!0),this.httpClient.delete(r).pipe(this.finalizeConnection())}save(e,t){return e.id?this.patch(e,t):this.post(e,t)}saveCurrent(e){return this.save(this.Current)}saveMany(e,t){return e.length?Object(g.a)(e.map(e=>this.save(e,t))):Object(a.a)([])}finalizeConnection(){return e=>e.pipe(Object(o.a)(()=>this.clear(null,!0)),super.finalizeConnection())}}class I extends S{}},yXIz:function(e,t,r){"use strict";r.r(t),r.d(t,"ConnectModule",(function(){return h}));var s=r("2kYt"),n=r("OTup"),i=r("doNb"),u=r("sEIs"),c=r("EM62");const o=[{path:"components",loadChildren:()=>r.e(6).then(r.bind(null,"pL0+")).then(e=>e.ComponentsModule)}];let a=(()=>{class e{}return e.\u0275mod=c.Vb({type:e}),e.\u0275inj=c.Ub({factory:function(t){return new(t||e)},imports:[[u.e.forChild(o)],u.e]}),e})(),h=(()=>{class e{}return e.\u0275mod=c.Vb({type:e}),e.\u0275inj=c.Ub({factory:function(t){return new(t||e)},providers:[i.a],imports:[[s.c,a,n.j]]}),e})()}}]);